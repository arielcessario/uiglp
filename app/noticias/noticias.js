(function () {    'use strict';    var scripts = document.getElementsByTagName("script");    var currentScriptPath = scripts[scripts.length - 1].src;    angular.module('uiglp.noticias', ['ngRoute'])        .config(['$routeProvider', function ($routeProvider) {            $routeProvider.when('/noticias', {                templateUrl: currentScriptPath.replace('.js', '.html'),                controller: 'NoticiasController',                data: {requiresLogin: false}            });        }])        .controller('NoticiasController', NoticiasController);    NoticiasController.$inject = ['NoticiasService', 'LoginState', 'store', 'jwtHelper'];    function NoticiasController(NoticiasService, LoginState, store, jwtHelper) {        var vm = this;        vm.fecha = new Date();        vm.meses = [            {nombre: 'Enero', indice: '0'},            {nombre: 'Febrero', indice: '1'},            {nombre: 'Marzo', indice: '2'},            {nombre: 'Abril', indice: '3'},            {nombre: 'Mayo', indice: '4'},            {nombre: 'Junio', indice: '5'},            {nombre: 'Julio', indice: '6'},            {nombre: 'Agosto', indice: '7'},            {nombre: 'Septiembre', indice: '8'},            {nombre: 'Octubre', indice: '9'},            {nombre: 'Noviembre', indice: '10'},            {nombre: 'Diciembre', indice: '11'}        ];        vm.anios = [{anio: 2015}, {anio: 2016}, {anio: 2017}, {anio: 2018}, {anio: 2019}, {anio: 2020}];        vm.noticias = [];        vm.noticia = {};        vm.saveComentario = saveComentario;        vm.anio = vm.fecha.getFullYear();        vm.mes = '' + vm.fecha.getMonth();        vm.fotoSelected = '';        vm.user = jwtHelper.decodeToken(store.get('jwt'));        NoticiasService.getNoticiasByFecha(vm.anio, vm.mes, function (data) {            console.log(data);            vm.noticias = data;            vm.noticia = data[0];            vm.fotoSelected = data[0].fotos[0].foto;        });        function saveComentario() {            var comentario = {                noticia_id: vm.noticia.noticia_id,                titulo: '',                detalles: vm.comentario,                parent_id: 0,                creador_id: vm.user.data.userId,                creador: [{mail:vm.user.data.userName}],                votos_up: 0,                votos_down: 0,                fecha: (new Date()).getFullYear() + '-' +((new Date()).getMonth() + 1)+ '-' + (new Date()).getDate()            };            NoticiasService.saveComentario(comentario,'saveComentario', function(data){                vm.noticia.comentarios.push(comentario);            });        }    }})();