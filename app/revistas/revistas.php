<?php/** * Created by PhpStorm. * Cliente: kn * Date: 16/03/15 * Time: 19:13 */session_start();if (file_exists('../../../MyDBi.php')) {    require_once '../../../MyDBi.php';} else {    require_once '../MyDBi.php';}$data = file_get_contents("php://input");$decoded = json_decode($data);if ($decoded != null) {    if ($decoded->function == 'save') {        save($decoded->item);    } else if ($decoded->function == 'update') {        update($decoded->item);    } else if ($decoded->function == 'delete') {        delete($decoded->item);    }} else {    $function = $_GET["function"];    if ($function == 'get') {        get();    }}function get(){    $db = new MysqliDb();    $results = $db->rawQuery('select revista_id, nombre, link from revistas');    echo json_encode($results);}function delete($item){    $db = new MysqliDb();    $decoded = json_decode($item);    $db->where('revista_id', $decoded->revista_id);    $results = $db->delete('revistas');    echo json_encode($results);}function save($item){    $db = new MysqliDb();    $decoded = json_decode($item);    $data = array(        'nombre' => $decoded->nombre,        'link' => $decoded->link    );    $result = $db->insert('revistas', $data);    if ($result > -1) {        echo json_encode(true);    } else {        echo json_encode(false);    }}function update($item){    $db = new MysqliDb();    $decoded = json_decode($item);    $db->where('revista_id', $decoded->revista_id);    $data = array(        'nombre' => $decoded->nombre,        'link' => $decoded->link    );    if ($db->update('revistas', $data)) {        echo json_encode(['result' => true]);    } else {        echo json_encode(['result' => false]);    }}