window.conProductos = 0;(function () {    'use strict';    var scripts = document.getElementsByTagName("script");    var currentScriptPath = scripts[scripts.length - 1].src;    angular.module('uiglp.main', ['ngRoute'])        .config(['$routeProvider', function ($routeProvider) {            $routeProvider.when('/', {                templateUrl: currentScriptPath.replace('.js', '.html'),                controllerAs: 'mainCtrl',                data: {requiresLogin: false}            });        }])        .controller('MainController', MainController);    MainController.$inject = ['$interval', 'slidersService', 'NoticiasService'];    function MainController($interval, slidersService, NoticiasService) {        var vm = this;        vm.noticia01 = {};        vm.noticia02 = {};        vm.noticia03 = {};        vm.fecha = new Date();        vm.anio = vm.fecha.getFullYear();        vm.mes = '' + vm.fecha.getMonth();        vm.meses = [            {id:0, nombre:'ENERO'},            {id:1, nombre:'FEBRERO'},            {id:2, nombre:'MARZO'},            {id:3, nombre:'ABRIL'},            {id:4, nombre:'MAYO'},            {id:5, nombre:'JUNIO'},            {id:6, nombre:'JULIO'},            {id:7, nombre:'AGOSTO'},            {id:8, nombre:'SEPTIEMBRE'},            {id:9, nombre:'OCTUBRE'},            {id:10, nombre:'NOVIEMBRE'},            {id:11, nombre:'DICIEMBRE'}];        vm.agendaMes = vm.meses[vm.fecha.getMonth()];        vm.listaEventos = [];        vm.evento = {};        vm.selectImage = selectImage;        vm.selectEvento= selectEvento;        vm.prevMonth = prevMonth;        vm.nextMonth = nextMonth;        vm.slider_01 = {};        vm.slider_02 = {};        vm.slider_03 = {};        vm.slider_04 = {};        vm.empresas = [            {nombre: '', foto: ''},            {nombre: '', foto: ''},            {nombre: '', foto: ''},            {nombre: '', foto: ''},            {nombre: '', foto: ''},            {nombre: '', foto: ''},            {nombre: '', foto: ''},            {nombre: '', foto: ''},            {nombre: '', foto: ''},            {nombre: '', foto: ''},            {nombre: '', foto: ''},            {nombre: '', foto: ''},            {nombre: '', foto: ''}        ];        vm.slideSelected = 1;        slidersService.getSliders(function (data) {            var slide01 = angular.element(document.querySelector('#slide-01'));            var slide02 = angular.element(document.querySelector('#slide-02'));            var slide03 = angular.element(document.querySelector('#slide-03'));            var slide04 = angular.element(document.querySelector('#slide-04'));            data[0].precio = 0;            data[1].precio = 0;            data[2].precio = 0;            data[3].precio = 0;            vm.slider_01 = data[0];            vm.slider_02 = data[1];            vm.slider_03 = data[2];            vm.slider_04 = data[3];            slide01[0].style.background = 'black url(img/' + vm.slider_01.imagen + ') 50% 50% no-repeat';            slide02[0].style.background = 'black url(img/' + vm.slider_02.imagen + ') 50% 50% no-repeat';            slide03[0].style.background = 'black url(img/' + vm.slider_03.imagen + ') 50% 50% no-repeat';            slide04[0].style.background = 'black url(img/' + vm.slider_04.imagen + ') 50% 50% no-repeat';        });        $interval(autoChangeSlide, 3000);        NoticiasService.getSoloNoticias(function (data) {            vm.noticia01 = data[0];            vm.noticia02 = data[1];            vm.noticia03 = data[2];        });        getEventos();        function getEventos() {            var year = 2015;            var month = vm.agendaMes.id;            NoticiasService.getEventosByFecha(year, month, function (data) {                var diasMes = new Date(year, month + 1, 0).getDate();                vm.listaEventos = [];                var event = {};                for (var i = 0; i < (new Date(year, month, 1).getDay()); i++) {                    event = {dia: '', evento: undefined};                    vm.listaEventos.push(event);                }                for (var i = 1; i < diasMes + 1; i++) {                    event = {dia: i, evento: undefined};                    for (var x = 0; x < data.length; x++) {                        if ((new Date(data[x].fecha)).getDate() == i) {                            event.evento = data[x];                        }                    }                    vm.listaEventos.push(event);                }                for (var i = diasMes + 2; i < 50; i++) {                    event = {dia: '', evento: undefined};                    vm.listaEventos.push(event);                }                vm.evento = data[0];            });        }        function nextMonth(){            vm.agendaMes = (vm.agendaMes.id == 11)?vm.meses[0]:vm.meses[vm.agendaMes.id + 1];            getEventos();        }        function prevMonth(){            vm.agendaMes = (vm.agendaMes.id == 0)?vm.meses[11]:vm.meses[vm.agendaMes.id - 1];            getEventos();        }        function autoChangeSlide() {            vm.slideSelected = (vm.slideSelected + 1 > 4) ? 1 : vm.slideSelected + 1;        }        function selectImage(slide) {            vm.slideSelected = slide;        }        function selectEvento(evento) {            if (evento!= undefined){                vm.evento = evento;            }        }    }})();